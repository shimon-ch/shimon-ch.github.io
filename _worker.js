var te={Stringify:1,BeforeStream:2,Stream:3},L=(e,t)=>{const s=new String(e);return s.isEscaped=!0,s.callbacks=t,s},Mt=/[&<>'"]/,Qe=async e=>{let t="";const s=[];for(let r=e.length-1;t+=e[r],r--,!(r<0);r--){let n=await e[r];typeof n=="object"&&s.push(...n.callbacks||[]);const i=n.isEscaped;if(n=await(typeof n=="object"?n.toString():n),typeof n=="object"&&s.push(...n.callbacks||[]),n.isEscaped??i)t+=n;else{const a=[t];K(n,a),t=a[0]}}return L(t,s)},K=(e,t)=>{const s=e.search(Mt);if(s===-1){t[0]+=e;return}let r,n,i=0;for(n=s;n<e.length;n++){switch(e.charCodeAt(n)){case 34:r="&quot;";break;case 39:r="&#39;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}t[0]+=e.substring(i,n)+r,i=n+1}t[0]+=e.substring(i,n)},ye=async(e,t,s,r,n)=>{const i=e.callbacks;if(!(i!=null&&i.length))return Promise.resolve(e);n?n[0]+=e:n=[e];const a=Promise.all(i.map(c=>c({phase:t,buffer:n,context:r}))).then(c=>Promise.all(c.filter(Boolean).map(o=>ye(o,t,!1,r,n))).then(()=>n[0]));return s?L(await a,i):a},Ze=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},p=(e,t,s)=>(Ze(e,t,"read from private field"),s?s.call(e):t.get(e)),J=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},O=(e,t,s,r)=>(Ze(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Lt="text/plain; charset=UTF-8",Re=(e,t={})=>(Object.entries(t).forEach(([s,r])=>e.set(s,r)),e),Y,B,x,E,k,W,de=class{constructor(e,t){this.env={},this._var={},this.finalized=!1,this.error=void 0,J(this,Y,200),J(this,B,void 0),J(this,x,void 0),J(this,E,void 0),J(this,k,void 0),J(this,W,!0),this.layout=void 0,this.renderer=s=>this.html(s),this.notFoundHandler=()=>new Response,this.render=(...s)=>this.renderer(...s),this.setLayout=s=>this.layout=s,this.getLayout=()=>this.layout,this.setRenderer=s=>{this.renderer=s},this.header=(s,r,n)=>{if(r===void 0){p(this,x)?p(this,x).delete(s):p(this,E)&&delete p(this,E)[s.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(s);return}n!=null&&n.append?(p(this,x)||(O(this,W,!1),O(this,x,new Headers(p(this,E))),O(this,E,{})),p(this,x).append(s,r)):p(this,x)?p(this,x).set(s,r):(p(this,E)??O(this,E,{}),p(this,E)[s.toLowerCase()]=r),this.finalized&&(n!=null&&n.append?this.res.headers.append(s,r):this.res.headers.set(s,r))},this.status=s=>{O(this,W,!1),O(this,Y,s)},this.set=(s,r)=>{this._var??(this._var={}),this._var[s]=r},this.get=s=>this._var?this._var[s]:void 0,this.newResponse=(s,r,n)=>{if(p(this,W)&&!n&&!r&&p(this,Y)===200)return new Response(s,{headers:p(this,E)});if(r&&typeof r!="number"){const a=Re(new Headers(r.headers),p(this,E));return new Response(s,{headers:a,status:r.status??p(this,Y)})}const i=typeof r=="number"?r:p(this,Y);p(this,E)??O(this,E,{}),p(this,x)??O(this,x,new Headers),Re(p(this,x),p(this,E)),p(this,k)&&(p(this,k).headers.forEach((a,c)=>{var o;(o=p(this,x))==null||o.set(c,a)}),Re(p(this,x),p(this,E))),n??(n={});for(const[a,c]of Object.entries(n))if(typeof c=="string")p(this,x).set(a,c);else{p(this,x).delete(a);for(const o of c)p(this,x).append(a,o)}return new Response(s,{status:i,headers:p(this,x)})},this.body=(s,r,n)=>typeof r=="number"?this.newResponse(s,r,n):this.newResponse(s,r),this.text=(s,r,n)=>{if(!p(this,E)){if(p(this,W)&&!n&&!r)return new Response(s);O(this,E,{})}return p(this,E)["content-type"]=Lt,typeof r=="number"?this.newResponse(s,r,n):this.newResponse(s,r)},this.json=(s,r,n)=>{const i=JSON.stringify(s);return p(this,E)??O(this,E,{}),p(this,E)["content-type"]="application/json; charset=UTF-8",typeof r=="number"?this.newResponse(i,r,n):this.newResponse(i,r)},this.html=(s,r,n)=>(p(this,E)??O(this,E,{}),p(this,E)["content-type"]="text/html; charset=UTF-8",typeof s=="object"&&(s instanceof Promise||(s=s.toString()),s instanceof Promise)?s.then(i=>ye(i,te.Stringify,!1,{})).then(i=>typeof r=="number"?this.newResponse(i,r,n):this.newResponse(i,r)):typeof r=="number"?this.newResponse(s,r,n):this.newResponse(s,r)),this.redirect=(s,r=302)=>(p(this,x)??O(this,x,new Headers),p(this,x).set("Location",s),this.newResponse(null,r)),this.notFound=()=>this.notFoundHandler(this),this.req=e,t&&(O(this,B,t.executionCtx),this.env=t.env,t.notFoundHandler&&(this.notFoundHandler=t.notFoundHandler))}get event(){if(p(this,B)&&"respondWith"in p(this,B))return p(this,B);throw Error("This context has no FetchEvent")}get executionCtx(){if(p(this,B))return p(this,B);throw Error("This context has no ExecutionContext")}get res(){return O(this,W,!1),p(this,k)||O(this,k,new Response("404 Not Found",{status:404}))}set res(e){if(O(this,W,!1),p(this,k)&&e){p(this,k).headers.delete("content-type");for(const[t,s]of p(this,k).headers.entries())if(t==="set-cookie"){const r=p(this,k).headers.getSetCookie();e.headers.delete("set-cookie");for(const n of r)e.headers.append("set-cookie",n)}else e.headers.set(t,s)}O(this,k,e),this.finalized=!0}get var(){return{...this._var}}};Y=new WeakMap;B=new WeakMap;x=new WeakMap;E=new WeakMap;k=new WeakMap;W=new WeakMap;var He=(e,t,s)=>(r,n)=>{let i=-1;return a(0);async function a(c){if(c<=i)throw new Error("next() called multiple times");i=c;let o,u=!1,l;if(e[c]?(l=e[c][0][0],r instanceof de&&(r.req.routeIndex=c)):l=c===e.length&&n||void 0,!l)r instanceof de&&r.finalized===!1&&s&&(o=await s(r));else try{o=await l(r,()=>a(c+1))}catch(h){if(h instanceof Error&&r instanceof de&&t)r.error=h,o=await t(h,r),u=!0;else throw h}return o&&(r.finalized===!1||u)&&(r.res=o),r}},Ht=class extends Error{constructor(e=500,t){super(t==null?void 0:t.message),this.res=t==null?void 0:t.res,this.status=e}getResponse(){return this.res?this.res:new Response(this.message,{status:this.status})}},It=async(e,t={all:!1})=>{const r=(e instanceof it?e.raw.headers:e.headers).get("Content-Type");return Ft(r)?Nt(e,t):{}};function Ft(e){return e===null?!1:e.startsWith("multipart/form-data")||e.startsWith("application/x-www-form-urlencoded")}async function Nt(e,t){const s=await e.formData();return s?Bt(s,t):{}}function Bt(e,t){const s={};return e.forEach((r,n)=>{t.all||n.endsWith("[]")?Wt(s,n,r):s[n]=r}),s}var Wt=(e,t,s)=>{e[t]&&qt(e[t])?Ut(e[t],s):e[t]?zt(e,t,s):e[t]=s};function qt(e){return Array.isArray(e)}var Ut=(e,t)=>{e.push(t)},zt=(e,t,s)=>{e[t]=[e[t],s]},et=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Gt=e=>{const{groups:t,path:s}=Kt(e),r=et(s);return Vt(r,t)},Kt=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(s,r)=>{const n=`@${r}`;return t.push([n,s]),n}),{groups:t,path:e}},Vt=(e,t)=>{for(let s=t.length-1;s>=0;s--){const[r]=t[s];for(let n=e.length-1;n>=0;n--)if(e[n].includes(r)){e[n]=e[n].replace(r,t[s][1]);break}}return e},le={},Ie=e=>{if(e==="*")return"*";const t=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);return t?(le[e]||(t[2]?le[e]=[e,t[1],new RegExp("^"+t[2]+"$")]:le[e]=[e,t[1],!0]),le[e]):null},tt=e=>{const t=e.url.match(/^https?:\/\/[^/]+(\/[^?]*)/);return t?t[1]:""},Jt=e=>{const t=e.indexOf("?",8);return t===-1?"":"?"+e.slice(t+1)},Xt=e=>{const t=tt(e);return t.length>1&&t[t.length-1]==="/"?t.slice(0,-1):t},ee=(...e)=>{let t="",s=!1;for(let r of e)t[t.length-1]==="/"&&(t=t.slice(0,-1),s=!0),r[0]!=="/"&&(r=`/${r}`),r==="/"&&s?t=`${t}/`:r!=="/"&&(t=`${t}${r}`),r==="/"&&t===""&&(t="/");return t},rt=e=>{if(!e.match(/\:.+\?$/))return null;const t=e.split("/"),s=[];let r="";return t.forEach(n=>{if(n!==""&&!/\:/.test(n))r+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){s.length===0&&r===""?s.push("/"):s.push(r);const i=n.replace("?","");r+="/"+i,s.push(r)}else r+="/"+n}),s.filter((n,i,a)=>a.indexOf(n)===i)},xe=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),/%/.test(e)?Ce(e):e):e,st=(e,t,s)=>{let r;if(!s&&t&&!/[%+]/.test(t)){let a=e.indexOf(`?${t}`,8);for(a===-1&&(a=e.indexOf(`&${t}`,8));a!==-1;){const c=e.charCodeAt(a+t.length+1);if(c===61){const o=a+t.length+2,u=e.indexOf("&",o);return xe(e.slice(o,u===-1?void 0:u))}else if(c==38||isNaN(c))return"";a=e.indexOf(`&${t}`,a+1)}if(r=/[%+]/.test(e),!r)return}const n={};r??(r=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const a=e.indexOf("&",i+1);let c=e.indexOf("=",i);c>a&&a!==-1&&(c=-1);let o=e.slice(i+1,c===-1?a===-1?void 0:a:c);if(r&&(o=xe(o)),i=a,o==="")continue;let u;c===-1?u="":(u=e.slice(c+1,a===-1?void 0:a),r&&(u=xe(u))),s?(n[o]&&Array.isArray(n[o])||(n[o]=[]),n[o].push(u)):n[o]??(n[o]=u)}return t?n[t]:n},Yt=st,Qt=(e,t)=>st(e,t,!0),Ce=decodeURIComponent,nt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},I=(e,t,s)=>(nt(e,t,"read from private field"),s?s.call(e):t.get(e)),Fe=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},Ne=(e,t,s,r)=>(nt(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),re,D,it=class{constructor(e,t="/",s=[[]]){Fe(this,re,void 0),Fe(this,D,void 0),this.routeIndex=0,this.bodyCache={},this.cachedBody=r=>{const{bodyCache:n,raw:i}=this,a=n[r];return a||(n.arrayBuffer?(async()=>await new Response(n.arrayBuffer)[r]())():n[r]=i[r]())},this.raw=e,this.path=t,Ne(this,D,s),Ne(this,re,{})}param(e){return e?this.getDecodedParam(e):this.getAllDecodedParams()}getDecodedParam(e){const t=I(this,D)[0][this.routeIndex][1][e],s=this.getParamValue(t);return s?/\%/.test(s)?Ce(s):s:void 0}getAllDecodedParams(){const e={},t=Object.keys(I(this,D)[0][this.routeIndex][1]);for(const s of t){const r=this.getParamValue(I(this,D)[0][this.routeIndex][1][s]);r&&typeof r=="string"&&(e[s]=/\%/.test(r)?Ce(r):r)}return e}getParamValue(e){return I(this,D)[1]?I(this,D)[1][e]:e}query(e){return Yt(this.url,e)}queries(e){return Qt(this.url,e)}header(e){if(e)return this.raw.headers.get(e.toLowerCase())??void 0;const t={};return this.raw.headers.forEach((s,r)=>{t[r]=s}),t}async parseBody(e){if(this.bodyCache.parsedBody)return this.bodyCache.parsedBody;const t=await It(this,e);return this.bodyCache.parsedBody=t,t}json(){return this.cachedBody("json")}text(){return this.cachedBody("text")}arrayBuffer(){return this.cachedBody("arrayBuffer")}blob(){return this.cachedBody("blob")}formData(){return this.cachedBody("formData")}addValidatedData(e,t){I(this,re)[e]=t}valid(e){return I(this,re)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return I(this,D)[0].map(([[,e]])=>e)}get routePath(){return I(this,D)[0].map(([[,e]])=>e)[this.routeIndex].path}};re=new WeakMap;D=new WeakMap;var _="ALL",Zt="all",at=["get","post","put","delete","options","patch"],ot="Can not add a route since the matcher is already built.",ct=class extends Error{},lt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},he=(e,t,s)=>(lt(e,t,"read from private field"),s?s.call(e):t.get(e)),er=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},ue=(e,t,s,r)=>(lt(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Oe=Symbol("composedHandler");function tr(){return class{}}var rr=e=>e.text("404 Not Found",404),Be=(e,t)=>e instanceof Ht?e.getResponse():(console.error(e),t.text("Internal Server Error",500)),M,ht=class extends tr(){constructor(e={}){super(),this._basePath="/",er(this,M,"/"),this.routes=[],this.notFoundHandler=rr,this.errorHandler=Be,this.onError=r=>(this.errorHandler=r,this),this.notFound=r=>(this.notFoundHandler=r,this),this.fetch=(r,n,i)=>this.dispatch(r,i,n,r.method),this.request=(r,n,i,a)=>{if(r instanceof Request)return n!==void 0&&(r=new Request(r,n)),this.fetch(r,i,a);r=r.toString();const c=/^https?:\/\//.test(r)?r:`http://localhost${ee("/",r)}`,o=new Request(c,n);return this.fetch(o,i,a)},this.fire=()=>{addEventListener("fetch",r=>{r.respondWith(this.dispatch(r.request,r,void 0,r.request.method))})},[...at,Zt].map(r=>{this[r]=(n,...i)=>(typeof n=="string"?ue(this,M,n):this.addRoute(r,he(this,M),n),i.map(a=>{typeof a!="string"&&this.addRoute(r,he(this,M),a)}),this)}),this.on=(r,n,...i)=>{if(!r)return this;for(const a of[n].flat()){ue(this,M,a);for(const c of[r].flat())i.map(o=>{this.addRoute(c.toUpperCase(),he(this,M),o)})}return this},this.use=(r,...n)=>(typeof r=="string"?ue(this,M,r):(ue(this,M,"*"),n.unshift(r)),n.map(i=>{this.addRoute(_,he(this,M),i)}),this);const s=e.strict??!0;delete e.strict,Object.assign(this,e),this.getPath=s?e.getPath??tt:Xt}clone(){const e=new ht({router:this.router,getPath:this.getPath});return e.routes=this.routes,e}route(e,t){const s=this.basePath(e);return t?(t.routes.map(r=>{let n;t.errorHandler===Be?n=r.handler:(n=async(i,a)=>(await He([],t.errorHandler)(i,()=>r.handler(i,a))).res,n[Oe]=r.handler),s.addRoute(r.method,r.path,n)}),this):s}basePath(e){const t=this.clone();return t._basePath=ee(this._basePath,e),t}mount(e,t,s){const r=ee(this._basePath,e),n=r==="/"?0:r.length,i=async(a,c)=>{let o;try{o=a.executionCtx}catch{}const u=s?s(a):[a.env,o],l=Array.isArray(u)?u:[u],h=Jt(a.req.url),f=await t(new Request(new URL((a.req.path.slice(n)||"/")+h,a.req.url),a.req.raw),...l);if(f)return f;await c()};return this.addRoute(_,ee(e,"*"),i),this}addRoute(e,t,s){e=e.toUpperCase(),t=ee(this._basePath,t);const r={path:t,method:e,handler:s};this.router.add(e,t,[s,r]),this.routes.push(r)}matchRoute(e,t){return this.router.match(e,t)}handleError(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}dispatch(e,t,s,r){if(r==="HEAD")return(async()=>new Response(null,await this.dispatch(e,t,s,"GET")))();const n=this.getPath(e,{env:s}),i=this.matchRoute(r,n),a=new de(new it(e,n,i),{env:s,executionCtx:t,notFoundHandler:this.notFoundHandler});if(i[0].length===1){let o;try{o=i[0][0][0][0](a,async()=>{a.res=await this.notFoundHandler(a)})}catch(u){return this.handleError(u,a)}return o instanceof Promise?o.then(u=>u||(a.finalized?a.res:this.notFoundHandler(a))).catch(u=>this.handleError(u,a)):o}const c=He(i[0],this.errorHandler,this.notFoundHandler);return(async()=>{try{const o=await c(a);if(!o.finalized)throw new Error("Context is not finalized. You may forget returning Response object or `await next()`");return o.res}catch(o){return this.handleError(o,a)}})()}},sr=ht;M=new WeakMap;var ut=e=>e.length>1,ft=e=>e[Oe]?ft(e[Oe]):e,nr=e=>e.name||(ut(e)?"[middleware]":"[handler]"),ir=e=>e.routes.map(({path:t,method:s,handler:r})=>{const n=ft(r);return{path:t,method:s,name:nr(n),isMiddleware:ut(n)}}),ar=(e,t)=>{const{process:s,Deno:r}=globalThis,n=typeof s<"u"?"NO_COLOR"in(s==null?void 0:s.env):typeof(r==null?void 0:r.noColor)=="boolean"?r.noColor:!1,i=(t==null?void 0:t.colorize)??!n,a={};let c=0,o=0;ir(e).filter(({isMiddleware:u})=>(t==null?void 0:t.verbose)||!u).map(u=>{const l=`${u.method}-${u.path}`;if((a[l]||(a[l]=[])).push(u),!(a[l].length>1))return c=Math.max(c,u.method.length),o=Math.max(o,u.path.length),{method:u.method,path:u.path,routes:a[l]}}).forEach(u=>{if(!u)return;const{method:l,path:h,routes:f}=u,d=i?`\x1B[32m${l}\x1B[0m`:l;console.log(`${d} ${" ".repeat(c-l.length)} ${h}`),t!=null&&t.verbose&&f.forEach(({name:v})=>{console.log(`${" ".repeat(c+3)} ${v}`)})})},or=(e,...t)=>{const s=[""];for(let r=0,n=e.length-1;r<n;r++){s[0]+=e[r];const i=t[r]instanceof Array?t[r].flat(1/0):[t[r]];for(let a=0,c=i.length;a<c;a++){const o=i[a];if(typeof o=="string")K(o,s);else if(typeof o=="number")s[0]+=o;else{if(typeof o=="boolean"||o===null||o===void 0)continue;if(typeof o=="object"&&o.isEscaped)if(o.callbacks)s.unshift("",o);else{const u=o.toString();u instanceof Promise?s.unshift("",u):s[0]+=u}else o instanceof Promise?s.unshift("",o):K(o.toString(),s)}}}return s[0]+=e[e.length-1],s.length===1?L(s[0]):Qe(s)},Me=Symbol("RENDERER"),dt=Symbol("ERROR_HANDLER"),F=Symbol("STASH"),pt=e=>{e&&"className"in e&&(e.class=e.className,delete e.className)},cr=(e,t,s)=>{typeof e=="string"&&pt(t);let r;return t&&"children"in t?(r=t.children,delete t.children):r=[],{tag:e,props:t,key:s,children:Array.isArray(r)?r:[r]}},lr=e=>cr("",e,void 0),vt=e=>({value:t,children:s})=>{const r=lr({children:[{tag:()=>{e.push(t)}},...s,{tag:()=>{e.pop()}}]});return r[dt]=n=>{throw e.pop(),n},r},hr=e=>{const t=[e],s={values:t,Provider:vt(t)};return Z.push(s),s},Z=[],ur=e=>{const t=[e],s={values:t,Provider(r){t.push(r.value);let n;try{n=r.children?(Array.isArray(r.children)?new gt("",{},r.children):r.children).toString():""}finally{t.pop()}return n instanceof Promise?n.then(i=>L(i,i.callbacks)):L(n)}};return s.Provider[Me]=vt(t),Z.push(s),s},yt=e=>e.values.at(-1),fr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],dr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Le=(e,t)=>{for(let s=0,r=e.length;s<r;s++){const n=e[s];if(typeof n=="string")K(n,t);else{if(typeof n=="boolean"||n===null||n===void 0)continue;n instanceof Q?n.toStringToBuffer(t):typeof n=="number"||n.isEscaped?t[0]+=n:n instanceof Promise?t.unshift("",n):Le(n,t)}}},Q=class{constructor(e,t,s){this.isEscaped=!0,this.tag=e,this.props=t,this.children=s}toString(){var t,s;const e=[""];(t=this.localContexts)==null||t.forEach(([r,n])=>{r.values.push(n)});try{this.toStringToBuffer(e)}finally{(s=this.localContexts)==null||s.forEach(([r])=>{r.values.pop()})}return e.length===1?e[0]:Qe(e)}toStringToBuffer(e){const t=this.tag,s=this.props;let{children:r}=this;e[0]+=`<${t}`;const n=Object.keys(s||{});for(let i=0,a=n.length;i<a;i++){const c=n[i],o=s[c];if(c==="style"&&typeof o=="object"){const u=Object.keys(o).map(l=>`${l.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}:${o[l]}`).join(";");e[0]+=` style="${u}"`}else if(typeof o=="string")e[0]+=` ${c}="`,K(o,e),e[0]+='"';else if(o!=null)if(typeof o=="number"||o.isEscaped)e[0]+=` ${c}="${o}"`;else if(typeof o=="boolean"&&dr.includes(c))o&&(e[0]+=` ${c}=""`);else if(c==="dangerouslySetInnerHTML"){if(r.length>0)throw"Can only set one of `children` or `props.dangerouslySetInnerHTML`.";r=[L(o.__html)]}else if(o instanceof Promise)e[0]+=` ${c}="`,e.unshift('"',o);else if(typeof o=="function"){if(!c.startsWith("on"))throw`Invalid prop '${c}' of type 'function' supplied to '${t}'.`}else e[0]+=` ${c}="`,K(o.toString(),e),e[0]+='"'}if(fr.includes(t)){e[0]+="/>";return}e[0]+=">",Le(r,e),e[0]+=`</${t}>`}},pr=class extends Q{toStringToBuffer(e){const{children:t}=this,s=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(s instanceof Promise)if(Z.length===0)e.unshift("",s);else{const r=Z.map(n=>[n,n.values.at(-1)]);e.unshift("",s.then(n=>(n instanceof Q&&(n.localContexts=r),n)))}else s instanceof Q?s.toStringToBuffer(e):typeof s=="number"||s.isEscaped?e[0]+=s:K(s,e)}},gt=class extends Q{toStringToBuffer(e){Le(this.children,e)}},We=(e,t,...s)=>{let r;t&&(r=t==null?void 0:t.key,delete t.key);const n=pe(e,t,s);return n.key=r,n},pe=(e,t,s)=>typeof e=="function"?new pr(e,t,s):(pt(t),new Q(e,t,s)),ge=({children:e})=>new gt("",{},Array.isArray(e)?e:e?[e]:[]);function S(e,t,s){let r;if(!t||!("children"in t))r=pe(e,t,[]);else{const n=t.children;delete t.children,r=Array.isArray(n)?pe(e,t,n):pe(e,t,[n])}return r.key=s,r}var oe=":-hono-global",vr=new RegExp(`^${oe}{(.*)}$`),yr="hono-css",V=Symbol(),P=Symbol(),j=Symbol(),U=Symbol(),Se=Symbol(),qe=Symbol(),mt=e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"css-"+s},gr=['"(?:(?:\\\\[\\s\\S]|[^"\\\\])*)"',"'(?:(?:\\\\[\\s\\S]|[^'\\\\])*)'"].join("|"),mr=new RegExp(["("+gr+")","(?:"+["^\\s+","\\/\\*.*?\\*\\/\\s*","\\/\\/.*\\n\\s*","\\s+$"].join("|")+")","\\s*;\\s*(}|$)\\s*","\\s*([{};:,])\\s*","(\\s)\\s+"].join("|"),"g"),wr=e=>e.replace(mr,(t,s,r,n,i)=>s||r||n||i||""),wt=(e,t)=>{var a,c;const s=[],r=[],n=((a=e[0].match(/^\s*\/\*(.*?)\*\//))==null?void 0:a[1])||"";let i="";for(let o=0,u=e.length;o<u;o++){i+=e[o];let l=t[o];if(!(typeof l=="boolean"||l===null||l===void 0)){Array.isArray(l)||(l=[l]);for(let h=0,f=l.length;h<f;h++){let d=l[h];if(!(typeof d=="boolean"||d===null||d===void 0))if(typeof d=="string")/([\\"'\/])/.test(d)?i+=d.replace(new RegExp(`([\\\\"']|(?<=<)\\/)`,"g"),"\\$1"):i+=d;else if(typeof d=="number")i+=d;else if(d[qe])i+=d[qe];else if(d[P].startsWith("@keyframes "))s.push(d),i+=` ${d[P].substring(11)} `;else{if((c=e[o+1])!=null&&c.match(/^\s*{/))s.push(d),d=`.${d[P]}`;else{s.push(...d[U]),r.push(...d[Se]),d=d[j];const v=d.length;if(v>0){const m=d[v-1];m!==";"&&m!=="}"&&(d+=";")}}i+=`${d||""}`}}}}return[n,wr(i),s,r]},Te=(e,t)=>{let[s,r,n,i]=wt(e,t);const a=vr.exec(r);a&&(r=a[1]);const c=(a?oe:"")+mt(s+r),o=(a?n.map(u=>u[P]):[c,...i]).join(" ");return{[V]:c,[P]:o,[j]:r,[U]:n,[Se]:i}},Er=e=>{for(let t=0,s=e.length;t<s;t++){const r=e[t];typeof r=="string"&&(e[t]={[V]:"",[P]:"",[j]:"",[U]:[],[Se]:[r]})}return e},Sr=(e,...t)=>{const[s,r]=wt(e,t);return{[V]:"",[P]:`@keyframes ${mt(s+r)}`,[j]:r,[U]:[],[Se]:[]}},Rr=0,xr=(e,t)=>{e||(e=[`/* h-v-t ${Rr++} */`]);const s=Array.isArray(e)?Te(e,t):e,r=s[P],n=Te(["view-transition-name:",""],[r]);return s[P]=oe+s[P],s[j]=s[j].replace(new RegExp("(?<=::view-transition(?:[a-z-]*)\\()(?=\\))","g"),r),n[P]=n[V]=r,n[U]=[...s[U],s],n},_r=e=>{const t=[];let s=0,r=0;for(let n=0,i=e.length;n<i;n++){const a=e[n];if(a==="'"||a==='"'){const c=a;for(n++;n<i;n++){if(e[n]==="\\"){n++;continue}if(e[n]===c)break}continue}if(a==="{"){r++;continue}if(a==="}"){r--,r===0&&(t.push(e.slice(s,n+1)),s=n+1);continue}}return t},br=({id:e})=>{let t;const s=()=>{var a;return t||(t=(a=document.querySelector(`style#${e}`))==null?void 0:a.sheet,t&&(t.addedStyles=new Set)),t?[t,t.addedStyles]:[]},r=(a,c)=>{const[o,u]=s();if(!o||!u){Promise.resolve().then(()=>{if(!s()[0])throw new Error("style sheet not found");r(a,c)});return}u.has(a)||(u.add(a),(a.startsWith(oe)?_r(c):[`${a[0]==="@"?"":"."}${a}{${c}}`]).forEach(l=>{o.insertRule(l,o.cssRules.length)}))};return[{toString(){const a=this[V];return r(a,this[j]),this[U].forEach(({[P]:c,[j]:o})=>{r(c,o)}),this[P]}},({children:a})=>({tag:"style",children:(Array.isArray(a)?a:[a]).map(c=>c[j]),props:{id:e}})]},Cr=({id:e})=>{const[t,s]=br({id:e}),r=new WeakMap,n=new RegExp(`(<style id="${e}">.*?)(</style>)`),i=h=>{const f=({buffer:y,context:w})=>{const[g,b]=r.get(w),C=Object.keys(g);if(!C.length)return;let T="";if(C.forEach(R=>{b[R]=!0,T+=R.startsWith(oe)?g[R]:`${R[0]==="@"?"":"."}${R}{${g[R]}}`}),r.set(w,[{},b]),y&&n.test(y[0])){y[0]=y[0].replace(n,(R,A,H)=>`${A}${T}${H}`);return}const $=`<script>document.querySelector('#${e}').textContent+=${JSON.stringify(T)}<\/script>`;if(y){y[0]=`${$}${y[0]}`;return}return Promise.resolve($)},d=({context:y})=>{r.get(y)||r.set(y,[{},{}]);const[w,g]=r.get(y);let b=!0;if(g[h[V]]||(b=!1,w[h[V]]=h[j]),h[U].forEach(({[P]:C,[j]:T})=>{g[C]||(b=!1,w[C]=T)}),!b)return Promise.resolve(L("",[f]))},v=new String(h[P]);Object.assign(v,h),v.isEscaped=!0,v.callbacks=[d];const m=Promise.resolve(v);return Object.assign(m,h),m.toString=t.toString,m},a=(h,...f)=>i(Te(h,f)),c=(...h)=>(h=Er(h),a(Array(h.length).fill(""),...h)),o=Sr,u=(h,...f)=>i(xr(h,f)),l=({children:h}={})=>L(h?`<style id="${e}">${h[j]}</style>`:`<style id="${e}"></style>`);return l[Me]=s,{css:a,cx:c,keyframes:o,viewTransition:u,Style:l}},Et=Cr({id:yr}),Or=Et.css,Tr=Et.Style,Ue=0,St=1,Pr=void 0,ze=[],Rt=e=>{var t;e.vC&&(e.s=e.vC,e.vC=void 0),(t=e.s)==null||t.forEach(Rt)},$r=e=>{var t;const s=()=>typeof e=="function"?e():e,r=Pe.at(-1);if(!r)return[s(),()=>{}];const[,n]=r,i=(t=n[F][1])[Ue]||(t[Ue]=[]),a=n[F][0]++;return i[a]||(i[a]=[s(),c=>{const o=Pr,u=i[a];if(typeof c=="function"&&(c=c(u[0])),c!==u[0])if(u[0]=c,ze.length){const l=ze.at(-1);ve([l,!1,o],n).then(h=>{if(!h||l!==2)return;const f=h.vC;(()=>{setTimeout(()=>{if(f!==h.vC)return;const v=Object.assign({},h);v.vC=void 0,me([],v,void 0),Rt(v),h.s=v.s,ve([0,!1,o],h)})})()})}else ve([0,!1,o],n)}])},Ar={Change:"Input",DoubleClick:"DblClick"},jr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Pe=[],ne=void 0,q=e=>Array.isArray(e),Ge=e=>{const t=e.match(new RegExp("^on([A-Z][a-zA-Z]+?)((?<!Pointer)Capture)?$"));if(t){const[,s,r]=t;return[(Ar[s]||s).toLowerCase(),!!r]}},kr=(e,t,s)=>{t||(t={});for(const[r,n]of Object.entries(t))if(!s||s[r]!==n){const i=Ge(r);if(i){if(typeof n!="function")throw new Error(`Event handler for "${r}" is not a function`);s&&e.removeEventListener(i[0],s[r],i[1]),e.addEventListener(i[0],n,i[1])}else r==="dangerouslySetInnerHTML"&&n?e.innerHTML=n.__html:r==="ref"?typeof n=="function"?n(e):"current"in n&&(n.current=e):r==="style"?typeof n=="string"?e.style.cssText=n:(e.style.cssText="",Object.assign(e.style,n)):n==null||n===!1?e.removeAttribute(r):n===!0?e.setAttribute(r,""):typeof n=="string"||typeof n=="number"?e.setAttribute(r,n):e.setAttribute(r,n.toString())}if(s){for(const[r,n]of Object.entries(s))if(!(r in t)){const i=Ge(r);i?e.removeEventListener(i[0],n,i[1]):r==="ref"?typeof n=="function"?n(null):n.current=null:e.removeAttribute(r)}}},Dr=(e,t)=>{if(t.s){const r=t.s;return t.s=void 0,r}t[F][0]=0,Pe.push([e,t]);const s=t.tag[Me]||t.tag;try{return[s.call(null,{...t.props,children:t.children})]}finally{Pe.pop()}},xt=(e,t,s,r,n)=>{var i;r.push(...e.vR),typeof e.tag=="function"&&((i=e[F][1][St])==null||i.forEach(a=>n.push(a))),e.vC.forEach(a=>{q(a)?s.push(a):typeof a.tag=="function"||a.tag===""?(a.c=t,xt(a,t,s,r,n)):(s.push(a),r.push(...a.vR))})},$e=e=>{if(e){if(e.e)return e.e}else return null;if(e.vC)for(let t=0,s=e.vC.length;t<s;t++){const r=$e(e.vC[t]);if(r)return r}return $e(e.nN)},_t=e=>{var t,s,r,n;q(e)||((s=(t=e[F])==null?void 0:t[1][St])==null||s.forEach(i=>{var a;return(a=i[2])==null?void 0:a.call(i)}),(r=e.vC)==null||r.forEach(_t)),(n=e.e)==null||n.remove(),e.tag=void 0},Mr=(e,t)=>{e.tag!==void 0&&(e.c=t,bt(e,t))},Lr=(e,t)=>{q(e)?t.textContent=e[0]:bt(e,t)},Ke=(e,t)=>{if(t){for(let s=0,r=e.length;s<r;s++)if(e[s]===t)return s}},bt=(e,t)=>{var c;const s=[],r=[],n=[];xt(e,t,s,r,n);const i=t.childNodes;let a=Ke(i,$e(e.nN))??Ke(i,(c=s.find(o=>o.e))==null?void 0:c.e)??i.length;for(let o=0,u=s.length;o<u;o++,a++){const l=s[o];let h;q(l)?(l.e&&(l.e.textContent=l[0]),h=l.e||(l.e=document.createTextNode(l[0]))):(h=l.e||(l.e=l.n?document.createElementNS(l.n,l.tag):document.createElement(l.tag)),kr(h,l.props,l.pP),Lr(l,h)),i[a]!==h&&i[a-1]!==l.e&&t.insertBefore(h,i[a]||null)}r.forEach(_t),n.forEach(([,o])=>o==null?void 0:o()),requestAnimationFrame(()=>{n.forEach(([,,,o])=>o==null?void 0:o())})},me=(e,t,s,r)=>{var u;if(t.tag===void 0)return;let n;r||(r=typeof t.tag=="function"?Dr(e,t):t.children),((u=r[0])==null?void 0:u.tag)===""&&(n=r[0][dt],s||(s=t));const i=t.vC?[...t.vC]:[],a=[],c=[];let o;try{r.flat().forEach(l=>{let h=Hr(l);if(h){o&&(o.nN=h),o=h,typeof h.tag=="function"&&Z.length>0&&(h[F][2]=Z.map(v=>[v,v.values.at(-1)]));let f;const d=i.findIndex(v=>v.key===h.key);if(d!==-1&&(f=i[d],i.splice(d,1)),f)q(h)?q(f)?(f[0]=h[0],h=f):c.push(f):f.tag!==h.tag?c.push(f):(f.pP=f.props,f.props=h.props,f.children=h.children,h=f);else if(!q(h)&&ne){const v=yt(ne);v&&(h.n=v)}q(h)||me(e,h,s),a.push(h)}}),t.vC=a,c.push(...i),t.vR=c}catch(l){if(n){const h=n(l,()=>ve([0,!1,e[2]],s));if(h){e[0]===1?e[1]=!0:me(e,t,s,[h]);return}}throw l}},Hr=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return[e.toString()];if(typeof e.tag=="function")e[F]=[0,[]];else{const t=jr[e.tag];t&&(e.n=t,ne||(ne=hr("")),e.children=[{tag:ne.Provider,props:{value:t},children:e.children}])}return e}},Ve=(e,t)=>{var s,r;(s=t[F][2])==null||s.forEach(([n,i])=>{n.values.push(i)}),me(e,t,void 0),(r=t[F][2])==null||r.forEach(([n])=>{n.values.pop()}),(e[0]!==1||!e[1])&&Mr(t,t.c)},fe=new WeakMap,ve=async(e,t)=>{const s=fe.get(t);s&&s[0](void 0);let r;const n=new Promise(a=>r=a);fe.set(t,[r,()=>{e[2]?e[2](e,t,a=>{Ve(a,t)}).then(()=>r(t)):(Ve(e,t),r(t))}]),await Promise.resolve();const i=fe.get(t);return i&&(fe.delete(t),i[1]()),n},Je=new TextEncoder,Ir=e=>new ReadableStream({async start(s){var u;const r=e instanceof Promise?await e:await e.toString(),n=typeof r=="object"?r:{},i=await ye(r,te.BeforeStream,!0,n);s.enqueue(Je.encode(i));let a=0;const c=[],o=l=>{c.push(l.catch(h=>(console.trace(h),"")).then(async h=>{var f;h=await ye(h,te.BeforeStream,!0,n),(f=h.callbacks)==null||f.map(d=>d({phase:te.Stream,context:n})).filter(Boolean).forEach(o),a++,s.enqueue(Je.encode(h))}))};for((u=i.callbacks)==null||u.map(l=>l({phase:te.Stream,context:n})).filter(Boolean).forEach(o);a!==c.length;)await Promise.all(c);s.close()}}),Ct=ur(null),Fr=(e,t,s,r)=>(n,i)=>{const a=typeof(r==null?void 0:r.docType)=="string"?r.docType:(r==null?void 0:r.docType)===!1?"":"<!DOCTYPE html>",c=s?We(s,{Layout:t,...i},n):n,o=or`${L(a)}${We(Ct.Provider,{value:e},c)}`;return r!=null&&r.stream?e.body(Ir(o),{headers:r.stream===!0?{"Transfer-Encoding":"chunked","Content-Type":"text/html; charset=UTF-8"}:r.stream}):e.html(o)},Nr=(e,t)=>function(r,n){const i=r.getLayout()??ge;return e&&r.setLayout(a=>e({...a,Layout:i})),r.setRenderer(Fr(r,i,e,t)),n()},Br=()=>{const e=yt(Ct);if(!e)throw new Error("RequestContext is not provided.");return e};const Wr=Nr(({children:e,title:t})=>S("html",{lang:"ja",children:[S("head",{children:[S("meta",{charset:"utf-8"}),S("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),S("title",{children:t}),S(ms,{src:"/app/client.ts",async:!0}),S(Tr,{})]}),S("body",{children:e})]})),qr=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"}));var we="[^/]+",ie=".*",ae="(?:|/.*)",se=Symbol();function Ur(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===ie||e===ae?1:t===ie||t===ae?-1:e===we?1:t===we?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var Ae=class{constructor(){this.children={}}insert(t,s,r,n,i){if(t.length===0){if(this.index!==void 0)throw se;if(i)return;this.index=s;return}const[a,...c]=t,o=a==="*"?c.length===0?["","",ie]:["","",we]:a==="/*"?["","",ae]:a.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(o){const l=o[1];let h=o[2]||we;if(l&&o[2]&&(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h)))throw se;if(u=this.children[h],!u){if(Object.keys(this.children).some(f=>f!==ie&&f!==ae))throw se;if(i)return;u=this.children[h]=new Ae,l!==""&&(u.varIndex=n.varIndex++)}!i&&l!==""&&r.push([l,u.varIndex])}else if(u=this.children[a],!u){if(Object.keys(this.children).some(l=>l.length>1&&l!==ie&&l!==ae))throw se;if(i)return;u=this.children[a]=new Ae}u.insert(c,s,r,n,i)}buildRegExpStr(){const s=Object.keys(this.children).sort(Ur).map(r=>{const n=this.children[r];return(typeof n.varIndex=="number"?`(${r})@${n.varIndex}`:r)+n.buildRegExpStr()});return typeof this.index=="number"&&s.unshift(`#${this.index}`),s.length===0?"":s.length===1?s[0]:"(?:"+s.join("|")+")"}},zr=class{constructor(){this.context={varIndex:0},this.root=new Ae}insert(e,t,s){const r=[],n=[];for(let a=0;;){let c=!1;if(e=e.replace(/\{[^}]+\}/g,o=>{const u=`@\\${a}`;return n[a]=[u,o],a++,c=!0,u}),!c)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=n.length-1;a>=0;a--){const[c]=n[a];for(let o=i.length-1;o>=0;o--)if(i[o].indexOf(c)!==-1){i[o]=i[o].replace(c,n[a][1]);break}}return this.root.insert(i,t,r,this.context,s),r}buildRegExp(){let e=this.root.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const s=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,i,a)=>typeof i<"u"?(s[++t]=Number(i),"$()"):(typeof a<"u"&&(r[Number(a)]=++t),"")),[new RegExp(`^${e}`),s,r]}},_e=[_,...at].map(e=>e.toUpperCase()),Ot=[],Gr=[/^$/,[],{}],je={};function Tt(e){return je[e]??(je[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*/,"(?:|/.*)")}$`))}function Kr(){je={}}function Vr(e){var u;const t=new zr,s=[];if(e.length===0)return Gr;const r=e.map(l=>[!/\*|\/:/.test(l[0]),...l]).sort(([l,h],[f,d])=>l?1:f?-1:h.length-d.length),n={};for(let l=0,h=-1,f=r.length;l<f;l++){const[d,v,m]=r[l];d?n[v]=[m.map(([w])=>[w,{}]),Ot]:h++;let y;try{y=t.insert(v,h,d)}catch(w){throw w===se?new ct(v):w}d||(s[h]=m.map(([w,g])=>{const b={};for(g-=1;g>=0;g--){const[C,T]=y[g];b[C]=T}return[w,b]}))}const[i,a,c]=t.buildRegExp();for(let l=0,h=s.length;l<h;l++)for(let f=0,d=s[l].length;f<d;f++){const v=(u=s[l][f])==null?void 0:u[1];if(!v)continue;const m=Object.keys(v);for(let y=0,w=m.length;y<w;y++)v[m[y]]=c[v[m[y]]]}const o=[];for(const l in a)o[l]=s[a[l]];return[i,o,n]}function X(e,t){if(e){for(const s of Object.keys(e).sort((r,n)=>n.length-r.length))if(Tt(s).test(t))return[...e[s]]}}var Jr=class{constructor(){this.name="RegExpRouter",this.middleware={[_]:{}},this.routes={[_]:{}}}add(e,t,s){var r;const{middleware:n,routes:i}=this;if(!n||!i)throw new Error(ot);_e.indexOf(e)===-1&&_e.push(e),n[e]||[n,i].forEach(o=>{o[e]={},Object.keys(o[_]).forEach(u=>{o[e][u]=[...o[_][u]]})}),t==="/*"&&(t="*");const a=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const o=Tt(t);e===_?Object.keys(n).forEach(u=>{var l;(l=n[u])[t]||(l[t]=X(n[u],t)||X(n[_],t)||[])}):(r=n[e])[t]||(r[t]=X(n[e],t)||X(n[_],t)||[]),Object.keys(n).forEach(u=>{(e===_||e===u)&&Object.keys(n[u]).forEach(l=>{o.test(l)&&n[u][l].push([s,a])})}),Object.keys(i).forEach(u=>{(e===_||e===u)&&Object.keys(i[u]).forEach(l=>o.test(l)&&i[u][l].push([s,a]))});return}const c=rt(t)||[t];for(let o=0,u=c.length;o<u;o++){const l=c[o];Object.keys(i).forEach(h=>{var f;(e===_||e===h)&&((f=i[h])[l]||(f[l]=[...X(n[h],l)||X(n[_],l)||[]]),i[h][l].push([s,a-u+o+1]))})}}match(e,t){Kr();const s=this.buildAllMatchers();return this.match=(r,n)=>{const i=s[r],a=i[2][n];if(a)return a;const c=n.match(i[0]);if(!c)return[[],Ot];const o=c.indexOf("",1);return[i[1][o],c]},this.match(e,t)}buildAllMatchers(){const e={};return _e.forEach(t=>{e[t]=this.buildMatcher(t)||e[_]}),this.middleware=this.routes=void 0,e}buildMatcher(e){const t=[];let s=e===_;return[this.middleware,this.routes].forEach(r=>{const n=r[e]?Object.keys(r[e]).map(i=>[i,r[e][i]]):[];n.length!==0?(s||(s=!0),t.push(...n)):e!==_&&t.push(...Object.keys(r[_]).map(i=>[i,r[_][i]]))}),s?Vr(t):null}},Xr=class{constructor(e){this.name="SmartRouter",this.routers=[],this.routes=[],Object.assign(this,e)}add(e,t,s){if(!this.routes)throw new Error(ot);this.routes.push([e,t,s])}match(e,t){if(!this.routes)throw new Error("Fatal error");const{routers:s,routes:r}=this,n=s.length;let i=0,a;for(;i<n;i++){const c=s[i];try{r.forEach(o=>{c.add(...o)}),a=c.match(e,t)}catch(o){if(o instanceof ct)continue;throw o}this.match=c.match.bind(c),this.routers=[c],this.routes=void 0;break}if(i===n)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.routes||this.routers.length!==1)throw new Error("No active router has been determined yet.");return this.routers[0]}},Pt=class{constructor(e,t,s){if(this.order=0,this.params={},this.children=s||{},this.methods=[],this.name="",e&&t){const r={};r[e]={handler:t,possibleKeys:[],score:0,name:this.name},this.methods=[r]}this.patterns=[]}insert(e,t,s){this.name=`${e} ${t}`,this.order=++this.order;let r=this;const n=Gt(t),i=[],a=[];for(let u=0,l=n.length;u<l;u++){const h=n[u];if(Object.keys(r.children).includes(h)){a.push(...r.patterns),r=r.children[h];const d=Ie(h);d&&i.push(d[1]);continue}r.children[h]=new Pt;const f=Ie(h);f&&(r.patterns.push(f),a.push(...r.patterns),i.push(f[1])),a.push(...r.patterns),r=r.children[h]}r.methods.length||(r.methods=[]);const c={},o={handler:s,possibleKeys:i.filter((u,l,h)=>h.indexOf(u)===l),name:this.name,score:this.order};return c[e]=o,r.methods.push(c),r}gHSets(e,t,s,r){const n=[];for(let i=0,a=e.methods.length;i<a;i++){const c=e.methods[i],o=c[t]||c[_],u={};o!==void 0&&(o.params={},o.possibleKeys.forEach(l=>{const h=u[o.name];o.params[l]=r[l]&&!h?r[l]:s[l]??r[l],u[o.name]=!0}),n.push(o))}return n}search(e,t){const s=[];this.params={};let n=[this];const i=et(t);for(let c=0,o=i.length;c<o;c++){const u=i[c],l=c===o-1,h=[];for(let f=0,d=n.length;f<d;f++){const v=n[f],m=v.children[u];m&&(m.params=v.params,l===!0?(m.children["*"]&&s.push(...this.gHSets(m.children["*"],e,v.params,{})),s.push(...this.gHSets(m,e,v.params,{}))):h.push(m));for(let y=0,w=v.patterns.length;y<w;y++){const g=v.patterns[y],b={...v.params};if(g==="*"){const H=v.children["*"];H&&(s.push(...this.gHSets(H,e,v.params,{})),h.push(H));continue}if(u==="")continue;const[C,T,$]=g,R=v.children[C],A=i.slice(c).join("/");if($ instanceof RegExp&&$.test(A)){b[T]=A,s.push(...this.gHSets(R,e,v.params,b));continue}($===!0||$ instanceof RegExp&&$.test(u))&&typeof C=="string"&&(b[T]=u,l===!0?(s.push(...this.gHSets(R,e,b,v.params)),R.children["*"]&&s.push(...this.gHSets(R.children["*"],e,b,v.params))):(R.params=b,h.push(R)))}}n=h}return[s.sort((c,o)=>c.score-o.score).map(({handler:c,params:o})=>[c,o])]}},Yr=class{constructor(){this.name="TrieRouter",this.node=new Pt}add(e,t,s){const r=rt(t);if(r){for(const n of r)this.node.insert(e,n,s);return}this.node.insert(e,t,s)}match(e,t){return this.node.search(e,t)}},ke=class extends sr{constructor(e={}){super(e),this.router=e.router??new Xr({routers:[new Jr,new Yr]})}},Qr=class{constructor(){this.createMiddleware=e=>e}createHandlers(...e){return e.filter(t=>t!==void 0)}},$t=()=>new Qr,Zr=e=>$t().createMiddleware(e);const es=$t(),ts=es.createHandlers,rs=function(){const[e,t]=$r(0);return S("div",{children:[S("p",{children:e}),S("button",{onClick:()=>t(e+1),children:"Increment"})]})},ss=function(e){return S("honox-island",{"component-name":"counter.tsx","data-serialized-props":JSON.stringify(Object.fromEntries(Object.entries(e).filter(([t])=>t!=="children"))),children:[S(rs,{...e}),e.children?S("template",{"data-hono-template":"",children:e.children}):null]})},ns=Or`
  font-family: sans-serif;
`,is=ts(e=>{const t=e.req.query("name")??"Shimon Tech Blog";return e.render(S("div",{class:ns,children:[S("h1",{children:["Hello, ",t,"!"]}),S(ss,{})]}),{title:t})}),as=!0,os=Object.freeze(Object.defineProperty({__proto__:null,__importing_islands:as,default:is},Symbol.toStringTag,{value:"Module"})),De="__importing_islands",Xe=e=>(e=e.replace(/\.tsx?$/g,"").replace(/\.mdx$/g,"").replace(/^\/?index$/,"/").replace(/\/index$/,"").replace(/\[\.{3}.+\]/,"*").replace(/\[(.+?)\]/g,":$1"),/^\//.test(e)?e:"/"+e),be=e=>{const t={};for(const[s,r]of Object.entries(e)){const n=s.split("/"),i=n.pop(),a=n.join("/");t[a]||(t[a]={}),i&&(t[a][i]=r)}for(const[s,r]of Object.entries(t)){const n=Object.entries(r).sort(([i],[a])=>i[0]==="["&&a[0]!=="["?1:i[0]!=="["&&a[0]==="["?-1:i.localeCompare(a));t[s]=Object.fromEntries(n)}return t},cs=e=>Object.keys(e).sort((r,n)=>{const i=r.split("/").length;return n.split("/").length-i}).map(r=>({[r]:e[r]})),Ye=e=>{const t={};for(const r of Object.keys(e)){const n=r.split("/");n.pop();const i=n.join("/");t[i]||(t[i]=[]),t[i].includes(r)||t[i].push(r)}const s=Object.keys(t).sort((r,n)=>n.length-r.length);for(const r of s)for(const n of s)if(n.startsWith(r)&&n!==r){const i=new Set([...t[n],...t[r]]);t[n]=[...i]}return t},ls="_404.tsx",hs="_error.tsx",us=["GET","POST","PUT","DELETE","OPTIONS","PATCH"],fs=e=>{const t=(e==null?void 0:e.root)??"/app/routes",s=new RegExp(`^${t}`),r=(e==null?void 0:e.app)??new ke;e!=null&&e.init&&e.init(r);const n=(e==null?void 0:e.NOT_FOUND)??Object.assign({}),i=be(n),a=(e==null?void 0:e.ERROR)??Object.assign({}),c=be(a),o=(e==null?void 0:e.RENDERER)??Object.assign({"/app/routes/_renderer.tsx":qr}),u=Ye(o),l=(e==null?void 0:e.MIDDLEWARE)??Object.assign({}),h=Ye(l),f=(e==null?void 0:e.ROUTES)??Object.assign({"/app/routes/index.tsx":os}),d=cs(be(f)),v=(m,y)=>{let w=y[m]??[];const g=C=>(w=y[C.join("/")],w||(C.pop(),C.length&&g(C)),w??[]),b=m.split("/");return w=g(b),w.sort((C,T)=>C.split("/").length-T.split("/").length),w};for(const m of d)for(const[y,w]of Object.entries(m)){const g=new ke;v(y,u).map($=>{const A=o[$].default;A&&g.all("*",A)}),v(y,h).map($=>{const A=l[$].default;A&&g.use(...A)});let T=y.replace(s,"");T=Xe(T);for(const[$,R]of Object.entries(w)){const A=R[De],H=Zr(async function(ce,Dt){ce.set(De,A),await Dt()}),N=R.default,z=Xe($);N&&"fetch"in N&&g.route(z,N);for(const G of us){const ce=R[G];ce&&(g.on(G,z,H),g.on(G,z,...ce))}N&&Array.isArray(N)&&(g.get(z,H),g.get(z,...N)),typeof N=="function"&&(g.get(z,H),g.get(z,G=>G.render(N(G),R)))}ds(g,y,i),ps(g,y,c),r.route(T,g)}return r};function ds(e,t,s){for(const[r,n]of Object.entries(s))if(t===r){const i=n[ls];if(i){const a=i.default;e.get("*",c=>(c.status(404),a(c)))}}}function ps(e,t,s){for(const[r,n]of Object.entries(s))if(t===r){const i=n[hs];if(i){const a=i.default;e.onError((c,o)=>(o.status(500),a(c,o)))}}}const vs=({children:e})=>{const t=Br();return S(ge,{children:t.get(De)?e:S(ge,{})})},ys={"app/client.ts":{file:"static/client-BWPD90IX.js",src:"app/client.ts",isEntry:!0,dynamicImports:["app/islands/counter.tsx","node_modules/honox/dist/client/runtime.js"]},"app/islands/counter.tsx":{file:"static/counter-Bt5Ci79I.js",src:"app/islands/counter.tsx",isDynamicEntry:!0,imports:["app/client.ts"]},"node_modules/honox/dist/client/runtime.js":{file:"static/runtime-C__tS9Jw.js",src:"node_modules/honox/dist/client/runtime.js",isDynamicEntry:!0,imports:["app/client.ts"]}},gs=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),ms=async e=>{const t=e.src;if(e.prod??!0){let s=e.manifest;if(!s){const r=Object.assign({"/dist/.vite/manifest.json":gs});for(const[,n]of Object.entries(r))if(n.default){s=n.default;break}}if(s){const r=s[t.replace(/^\//,"")];if(r)return S(vs,{children:S("script",{type:"module",async:!!e.async,src:`/${r.file}`})})}return S(ge,{})}else return S("script",{type:"module",async:!!e.async,src:t})},At=fs();ar(At);var jt=()=>async e=>{const s=await e.env.ASSETS.fetch(e.req.raw);return s.status===404?e.notFound():s};const Ee=new ke;Ee.get("/favicon.ico",jt());Ee.get("/static/*",jt());const ws=Object.assign({"/app/server.ts":At});let kt=!1;for(const[,e]of Object.entries(ws))e&&(Ee.route("/",e),Ee.notFound(e.notFoundHandler),kt=!0);if(!kt)throw new Error("Can't import modules from ['/src/index.tsx','/app/server.ts']");export{Ee as default};
